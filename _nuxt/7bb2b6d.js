(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{292:function(e){e.exports=JSON.parse('["2019-typhoon-19.json","2019-chiba-typhoon-15.json","2021-shizuoka-izusan.json"]')},293:function(e,t,o){e.exports=o.p+"img/logo.37f23b7.png"},294:function(e,t,o){var map={"./2019-chiba-typhoon-15":295,"./2019-chiba-typhoon-15.json":295,"./2019-typhoon-19":296,"./2019-typhoon-19.json":296,"./2021-geojson-test":297,"./2021-geojson-test.json":297,"./2021-shizuoka-izusan":298,"./2021-shizuoka-izusan.json":298,"./list":292,"./list.json":292,"./map-sample":299,"./map-sample.json":299};function n(e){var t=r(e);return o(t)}function r(e){if(!o.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}n.keys=function(){return Object.keys(map)},n.resolve=r,e.exports=n,n.id=294},295:function(e){e.exports=JSON.parse('{"map_id":"2019-chiba-typhoon-15","map_title":"印刷できる台風災害支援情報マップ（千葉県）","map_title_en":"Printable Typhoon Disaster Relief Information Map (Chiba Prefecture)","map_description":"SNSで流れる給水所等の情報をネットを見れない地域の人にも伝えられるよう、印刷に最適化したマップです。マップを必要な地域のところに調整すると、A4サイズにちょうどよく印刷され、かつ必要な場所の情報がリストとして表示されます。（GS・給水・避難所・充電・無料Wifi）  ぜひ印刷して必要な人に届けてあげてください！","map_image":"ogp_2019-chiba-typhoon-15.png","sources":[{"id":"chiba","url":"https://www.google.com/maps/d/kml?mid=18v4csEC-qPW_aeXhEnuzgMfUAqWcbF5q&forcekml=1","type":"kml","title":"2019千葉台風15号","show":true}],"default_hash":"35.034970230243786,139.83536606997205-34.998870264553034,139.90144296563784","center":[139.83536606997205,35.034970230243786],"type":"KML","layer_settings":{"GS(赤：無事)":{"name":"GS(赤：無事)","name_en":"GS(red: safety)","color":"#992222","bg_color":"#CA9491","icon_class":"fas fa-heart","class":"layer_gs_ok"},"GS (黒点：未確認)":{"name":"GS (黒点：未確認)","name_en":"GS(black: unconfirmed)","color":"#4F4F5A","bg_color":"#B7B7BE","icon_class":"fas fa-eye-slash","class":"layer_gs_undefined"},"給水所_(千葉市・県指定除く）":{"name":"給水所_(千葉市・県指定除く）","name_en":"Water Supply Office(Chiba Pref, without prefectural designation)","color":"#285797","bg_color":"#A3BBDA","icon_class":"fas fa-tint","class":"layer_water_chibacity"},"避難所":{"name":"避難所","name_en":"shelter","color":"#276445","bg_color":"#A4C1B0","icon_class":"fas fa-street-view","class":"layer_temporary_houses"},"携帯充電_ほか":{"name":"携帯充電_ほか","name_en":"Cell phone charging (Other)","color":"#6D4615","bg_color":"#C1B17E","icon_class":"fas fa-plug","class":"layer_charger"},"無料Wifi":{"name":"無料Wifi","name_en":"Free Wi-Fi","color":"#604490","bg_color":"#BDB1D8","icon_class":"fas fa-wifi","class":"layer_wifi"}}}')},296:function(e){e.exports=JSON.parse('{"map_id":"2019-typhoon-19","map_title":"2019年台風19号災害支援情報マップ","map_title_en":"2019 Typhoon-19 Disaster relief information map","map_description":"SNSで流れる給水所等の情報をネットを見れない地域の人にも伝えられるよう、印刷に最適化したマップです。マップを必要な地域のところに調整すると、A4サイズにちょうどよく印刷され、かつ必要な場所の情報がリストとして表示されます。随時情報更新していきます。ぜひ印刷して必要な人に届けてあげてください！","map_image":"ogp_2019-typhoon-19.png","sources":[{"id":"japan","url":"https://www.google.com/maps/d/kml?mid=1pl0sY4TmNur6xB4bKvxxvi5rsizCY1bu&forcekml=1","link":"https://www.google.com/maps/d/u/0/viewer?mid=1pl0sY4TmNur6xB4bKvxxvi5rsizCY1bu","updated_search_key":{"type":"regexp","pattern":"<!\\\\[CDATA\\\\[(<br>)*(.+?)<br>","index":2,"field":"description"},"type":"kml","title":"全国","show":true},{"id":"nagareyama","url":"https://www.google.com/maps/d/kml?mid=1rAKfJOHRj7K8KkaAGEAwN4RGTABs9zIt&forcekml=1","link":"https://www.google.com/maps/d/u/0/viewer?mid=1rAKfJOHRj7K8KkaAGEAwN4RGTABs9zIt","type":"kml","title":"千葉県流山市のみ","show":true},{"id":"sousou","url":"https://www.google.com/maps/d/kml?mid=1IKlMaWlNDYmfEtgWsL9ZirnmLnirffhl&forcekml=1","link":"https://www.google.com/maps/d/u/0/viewer?mid=1IKlMaWlNDYmfEtgWsL9ZirnmLnirffhl","type":"kml","title":"福島県相双地区","updated_search_key":{"type":"regexp","pattern":"(2019.+?更新)","index":1,"field":"description"},"show":true}],"default_hash":"35.89575594927511,139.65994077606268-35.62491040699955,140.1995505107742","center":[140.1099463905179,35.77029301432708],"type":"KML","layer_settings":{"GS (黒点：未確認)":{"color":"#4F4F5A","bg_color":"#B7B7BE","icon_class":"fas fa-eye-slash","class":"layer_gs_undefined"},"避難所_台風19号_19年10月":{"name":"避難所_台風19号_19年10月","color":"#276445","bg_color":"#A4C1B0","icon_class":"fas fa-street-view","class":"layer_temporary_houses"},"携帯充電_ショップ(緑点；未確認)":{"color":"#6D4615","bg_color":"#C1B17E","icon_class":"fas fa-plug","class":"layer_charger"},"自主避難所":{"name":"自主避難所(流山市版)","color":"#276445","bg_color":"#A4C1B0","icon_class":"fas fa-street-view","class":"layer_temporary_houses"},"docomo 無料WIFI":{"color":"#992222","bg_color":"#CA9491","icon_class":"fas fa-wifi","class":"layer_wifi-docomo"},"Softbank 無料WIFI":{"color":"#666666","bg_color":"#B1B6B9","icon_class":"fas fa-wifi","class":"layer_wifi-sb"},"携帯充電(緑マーク：確認済)_台風19号_19年10月":{"color":"#456658","bg_color":"#8ED4B8","icon_class":"fas fa-plug","class":"layer_charger_19"},"給水(青：確認済)_台風19号_19年10月":{"color":"#001D96","bg_color":"#1CA3EA","icon_class":"fas fa-tint","class":"layer_water"},"Wifi(薄茶；確認済)_台風19号_19年10月":{"color":"#6D4615","bg_color":"#C1B17E","icon_class":"fas fa-wifi","class":"layer_wifi"},"トイレ(紫：確認済)_台風19号_19年10月 のコピー":{"color":"#BE4BDB","bg_color":"#d6b1e0","icon_class":"fas fa-toilet","class":"layer_toilet"},"入浴(桃：確認済)_台風19号_19年10月":{"color":"#c43895","bg_color":"#f9b3e2","icon_class":"fas fa-shower","class":"layer_shower"},"給水(青)_台風19号_19年10月":{"color":"#001D96","bg_color":"#1CA3EA","icon_class":"fas fa-tint","class":"layer_water"},"（南相馬市）給水所":{"color":"#001D96","bg_color":"#1CA3EA","icon_class":"fas fa-tint","class":"layer_water"},"（無料）入浴施設":{"color":"#c43895","bg_color":"#f9b3e2","icon_class":"fas fa-shower","class":"layer_shower"}}}')},297:function(e){e.exports=JSON.parse('{"map_id":"2021-geojson-test","map_title":"GHP2020 デモ","map_title_en":"GHP2020 Demo","map_description":"","map_image":null,"sources":[{"id":"test","url":"https://script.googleusercontent.com/macros/echo?user_content_key=_6_ZR0XLL0MbaI41b7arw1tKJ44ZRMzJXFJQgYMfmfqp-E5cBnQIhZwUQmD7bjdymn9B2TyvkttH7Lt_J_MeCymrpWuQcL-wm5_BxDlH2jW0nuo2oDemN9CCS2h10ox_1xSncGQajx_ryfhECjZEnEQtBr2DXtd2VVZ6e7KTde4_k47hKKS_Llyb1VlE15EZ8qun0TIBV1jJ2FWGfRqnKT0BdYNs3pinvJsw0wqpxiI&lib=MY-PLI9PNsbIhESkFzgRhtgxmTEkGC2HD","type":"geojson","title":"GHP2020デモ用GeoJSON","title_en":"GHP2020 Demo GeoJSON","show":true}],"default_hash":"36.40706898962824,139.00427694616945-35.6385475171373,140.277266400681534","center":[139.42620262933877,35.93546870323782],"type":"geojson","layer_settings":{"未分類":{"class":"layer_not_categorized","color":"#C0C0C0","bg_color":"#808080"},"自主避難所":{"name":"自主避難所","name_en":"Voluntary shelter","color":"#276445","bg_color":"#A4C1B0","icon_class":"fas fa-street-view","class":"layer_temporary_houses"},"給水所":{"color":"#001D96","bg_color":"#1CA3EA","icon_class":"fas fa-tint","class":"layer_water"},"入浴施設":{"color":"#c43895","bg_color":"#f9b3e2","icon_class":"fas fa-shower","class":"layer_shower"},"携帯充電":{"color":"#6D4615","bg_color":"#C1B17E","icon_class":"fas fa-plug","class":"layer_charger"},"駅":{"name":"駅","name_en":"Station","color":"#C0C0C0","bg_color":"#808080","icon_class":"fas fa-street-view","class":"layer_temporary_houses"},"公園":{"name":"公園","name_en":"Park","color":"#992222","bg_color":"#CA9491","icon_class":"fas fa-heart","class":"layer_gs_ok"}}}')},298:function(e){e.exports=JSON.parse('{"map_id":"2021-shizuoka-izusan","map_title":"2021年 静岡県熱海市伊豆山 土砂崩れ 災害情報","map_title_en":"2021 Landslide at Izusan, Atami, Shizuoka","map_description":"","map_description_en":"","map_image":null,"sources":[{"id":"shizuoka-izusan","url":"https://script.google.com/macros/s/AKfycbw0D0AjIFPBGbBXj3Zr5X1j_34fwIj8RSflwc6EJrDp97pMdRRnyNcMOOHvuRHZOslJdg/exec?confirmed=true","type":"geojson","title":"2021年 静岡県熱海市伊豆山 土砂崩れ 災害情報","title_en":"2021 Landslide at Izusan, Atami, Shizuoka","show":true}],"default_hash":"35.15658910678265,138.91779233722173-35.08428585053625,139.2314565974297","center":[139.055633,35.1208872],"type":"geojson","layer_settings":{"未分類":{"name":"未分類","name_en":"Not categorized","class":"layer_not_categorized","color":"#C0C0C0","bg_color":"#808080"},"避難所":{"name":"避難所","name_en":"Shelter","color":"#276445","bg_color":"#A4C1B0","icon_class":"fas fa-street-view","class":"layer_shelter"},"給水所":{"name":"給水所","name_en":"Water supply station","color":"#001D96","bg_color":"#1CA3EA","icon_class":"fas fa-tint","class":"layer_water"},"車両通行止め":{"name":"車両通行止め","name_en":"Road closed","color":"#ff0000","bg_color":"#ff0080","icon_class":"fas fa-ban","class":"layer_water"},"鉄道運行見合わせ":{"name":"鉄道運行見合わせ","name_en":"Railway operation suspension","color":"#ff0000","bg_color":"#ff0080","icon_class":"fas fa-ban","class":"layer_water"},"入浴施設":{"name":"入浴施設","name_en":"Bathing facility","color":"#c43895","bg_color":"#f9b3e2","icon_class":"fas fa-shower","class":"layer_shower"}}}')},299:function(e){e.exports=JSON.parse('{"map_id":"new-map","map_title":"新しい地図","map_title_en":"New Map","map_description":"新しく地図を追加します","map_description_en":"Add new map","map_image":null,"sources":[{"id":"test_kml","url":"/data/test.kml","type":"kml","title":"Test用KML","title_en":"KML for test","show":true},{"id":"test_geojson","url":"/data/test.geojson","type":"geojson","title":"Test用GeoJSON","title_en":"GeoJSON for test","show":true}],"default_hash":"35.034970230243786,139.83536606997205-34.998870264553034,139.90144296563784","center":[139.83536606997205,35.034970230243786],"layer_settings":{"避難所":{"color":"#276445","bg_color":"#A4C1B0","icon_class":"fas fa-street-view","class":"layer_temporary_houses"},"給水所":{"color":"#285797","bg_color":"#A3BBDA","icon_class":"fas fa-tint","class":"layer_water"}}}')},300:function(e,t,o){"use strict";o(20);var n={props:["isOpen"],data:function(){return{map_config:this.$nuxt.$route.params.map?o(294)("./"+this.$nuxt.$route.params.map):""}},methods:{handleClick:function(){this.isOpen=!1,this.$emit("closeModal")}}},r=o(24),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"modal",class:{open:e.isOpen}},[e.map_config?o("p",[e._v(e._s(e.map_config.map_description))]):e._e(),e._m(0),o("div",[o("span",{staticClass:"modal-close",on:{click:e.handleClick}},[e._v("× close")])])]),o("div",{staticClass:"modal-background",class:{open:e.isOpen},on:{click:e.handleClick}})])}),[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",[e._v("このサイトのソースコードはオープンに公開しております。開発にご協力いただける方は、"),o("a",{attrs:{href:"https://github.com/codeforjapan/mapprint"}},[e._v("Code for Japan の Github リポジトリ")]),e._v("から、開発にご参加ください。JavaScript や Leaflet などの経験がある方、大歓迎です。")])}],!1,null,null,null);t.a=component.exports},301:function(e,t,o){e.exports=o.p+"img/sp_logo.2b94eb3.png"},302:function(e,t,o){e.exports=o.p+"img/illust_1.314dd35.png"},303:function(e,t,o){e.exports=o.p+"img/illust_2.068b099.png"},311:function(e,t,o){var map={"./fukidashi_obj_en.svg":312,"./fukidashi_obj_ja.svg":313};function n(e){var t=r(e);return o(t)}function r(e){if(!o.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}n.keys=function(){return Object.keys(map)},n.resolve=r,e.exports=n,n.id=311},312:function(e,t,o){e.exports=o.p+"img/fukidashi_obj_en.3cb0717.svg"},313:function(e,t,o){e.exports=o.p+"img/fukidashi_obj_ja.fbdfe01.svg"},314:function(e,t,o){var map={"./active_txt_en.svg":315,"./active_txt_ja.svg":316};function n(e){var t=r(e);return o(t)}function r(e){if(!o.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}n.keys=function(){return Object.keys(map)},n.resolve=r,e.exports=n,n.id=314},315:function(e,t,o){e.exports=o.p+"img/active_txt_en.65eaeac.svg"},316:function(e,t,o){e.exports=o.p+"img/active_txt_ja.70eeb11.svg"},317:function(e,t,o){"use strict";o.r(t),o.d(t,"DEFAULT_ICON_COLOR",(function(){return m})),o.d(t,"default",(function(){return d})),o.d(t,"readCategoryOfFolder",(function(){return f}));o(20),o(44),o(126),o(27),o(71),o(74),o(40);var n=o(8),r=o(160),l=o(161),c=o(127),_=o(318),m="lightgreen",d=function(){function e(){Object(r.a)(this,e)}return Object(l.a)(e,[{key:"parse",value:function(e,data,t,o){switch(e){case"kml":var n=(new DOMParser).parseFromString(data,"text/xml");return this.loadKMLData(n,t,o);case"umal":this.loadUmapJsonData(data);break;case"geojson":var r=JSON.parse(data);return this.loadGeoJSONData(r)}}},{key:"addFeatureCollection",value:function(e,t){e.features.forEach((function(e){e.geometry.type}))}},{key:"loadUmapJsonData",value:function(data){data.layers.forEach((function(e){e._umap_options;e.features.forEach((function(e){}))}))}},{key:"loadGeoJSONData",value:function(data){var e=Date.now().toLocaleString(),t=[];return data.features.forEach((function(e){var o="未分類";e.properties.category&&(o=e.properties.category),t.push({feature:e,category:o})})),[t,e]}},{key:"loadKMLData",value:function(data,e,t){var o=data.getElementsByTagName("Folder");0==o.length&&(o=data.getElementsByTagName("Document"));var n="";if(null!=t&&"regexp"==t.type){var r=data.getElementsByTagName(t.field);if(r.length>0){var text=r[0].innerHTML,l=new RegExp(t.pattern,"iu").exec(text);null!=l&&l.length>1&&(n="("+l[t.index]+")")}}var c=[];return Array.prototype.forEach.call(o,(function(e){var t=f(e,data).name;if("FeatureCollection"==_.kml(e).type){var o=_.kml(e,{styles:!0});if(o.features.length>0)return o.features.map((function(e){"Point"==e.geometry.type&&c.push({feature:e,category:t})}))}else{var n=_.kml(e,{styles:!0});c.push({geojsondata:n,category:t})}})),[c,n]}},{key:"inBounds",value:function(e,t){var o=(e[0]-t.getNorthEast().lng)*(e[0]-t.getSouthWest().lng)<0,n=(e[1]-t.getNorthEast().lat)*(e[1]-t.getSouthWest().lat)<0;return o&&n}},{key:"convertCategoryStyle",value:function(e,t){return null==t||t.forEach((function(t){if(t.name==e.name)return e.color=t.color,e.bgColor=t.bg_color,e.iconClass=t.icon_class,e.class=t.class,e})),e}},{key:"serializeLatLng",value:function(e){return e.lat+","+e.lng}},{key:"serializeBounds",value:function(e){return this.serializeLatLng(e.getNorthWest())+"-"+this.serializeLatLng(e.getSouthEast())}},{key:"deserializeLatLng",value:function(s){var e=s.split(",",2),t=Object(n.a)(e,2),o=t[0],r=t[1],l=parseFloat(r),_=parseFloat(o);return new c.LngLat(l,_)}},{key:"deserializeBounds",value:function(s){try{var e=this;return new c.LngLatBounds(s.split("-",2).map((function(t){return e.deserializeLatLng(t)})))}catch(e){return}}}]),e}();function f(e,t){var o,n="red";try{o=e.getElementsByTagName("name")[0].textContent;var r=e.getElementsByTagName("styleUrl")[0].textContent;if(r){var l=t.querySelectorAll(r+" Pair");l.length>0&&Array.prototype.forEach.call(l,(function(e){var o=e.querySelector("key");if(o&&"normal"==o.textContent){var r=e.querySelector("styleUrl").textContent,style=t.querySelector(r);try{n="#"+style.querySelector("IconStyle color").textContent.substr(0,6)}catch(e){n=m}}}))}}catch(t){console.log("#category read error"),console.log(t),console.log(e)}return{name:o,color:n,iconUrl:undefined}}},319:function(e,t){},322:function(e,t,o){"use strict";o.r(t);var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"aside-item3"},[t("div",{staticClass:"aside-item-illust1"},[t("img",{attrs:{src:o(302),width:"360",height:"450",alt:""}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"aside-item6"},[t("div",{staticClass:"aside-item-illust2"},[t("img",{attrs:{src:o(303),width:"640",height:"435",alt:""}})])])}],r=(o(20),o(304)),l=o.n(r),c=(o(90),o(44),o(45),o(11),o(71),o(40),o(8)),_=(o(31),o(4)),m=(o(305),o(307),o(127)),d=o.n(m);o(125);function f(dt,e){var t=dt.getFullYear()+"年"+("00"+(dt.getMonth()+1)).slice(-2)+"月"+("00"+dt.getDate()).slice(-2)+"日"+("00"+dt.getHours()).slice(-2)+"時"+("00"+dt.getMinutes()).slice(-2)+"分";return"en"===e&&(t=dt.toLocaleString("en-US")),t}var h,y=o(309).crc16,v={props:["map_config"],data:function(){var e="en";return"ja"===this.$i18n.locale&&(e="ja"),{layers:[],map:null,bounds:null,updated_at:null,previous_hash:"",activeCategory:"",checkedArea:[],isOpenAreaSelect:!1,isOpenList:!1,isDisplayAllCategory:!0,mapStyle:"https://tile.openstreetmap.jp/styles/maptiler-basic-ja/style.json",legendMark:o(311)("./fukidashi_obj_".concat(e,".svg")),legendActive:o(314)("./active_txt_".concat(e,".svg"))}},computed:{center:function(){return this.map_config.center},inBoundsMarkers:function(){var e=this,t=[];return this.layers.map((function(o){o.source.show&&o.markers.map((function(marker){e.bounds&&h.inBounds(marker.feature.geometry.coordinates,e.bounds)&&t.push(marker)}))})),t},displayMarkersGroupByCategory:function(){return this.inBoundsMarkers.reduce((function(e,t){var o=e.find((function(g){return g.category===t.category}));return o||(o={category:t.category,prop:t.category,markers:[]},e.push(o)),o.markers.push(t),e}),[])},selectArea:{get:function(){return this.checkedArea},set:function(e){this.checkedArea=e}}},mounted:function(){var e=o(317).default,t=o(320).default;h=new e;var area=[],n={},r=this;this.map_config.sources.forEach((function(source){Object(_.a)(regeneratorRuntime.mark((function e(){var data,o,l,_,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return source.show&&area.push(source.title),r.checkedArea=area,r.updated_at=f(new Date),e.next=5,t.get(source.url).text();case 5:data=e.sent,o=h.parse(source.type,data,r.map_config.layer_settings,source.updated_search_key),l=Object(c.a)(o,2),_=l[0],m=l[1],_.map((function(marker){n[marker.category]=!0})),source.updated_at=m,Object.keys(n).map((function(e){if(!r.map_config.layer_settings[e]){var t="#";t+=(parseInt(y(e.substr(0)),16)%32+64).toString(16),t+=(parseInt(y(e.substr(1)),16)%32+64).toString(16),t+=(parseInt(y(e.substr(2)),16)%32+64).toString(16);var o="#";o+=(parseInt(y(e.substr(0)),16)%32+128).toString(16),o+=(parseInt(y(e.substr(1)),16)%32+128).toString(16),o+=(parseInt(y(e.substr(2)),16)%32+128).toString(16),r.map_config.layer_settings[e]={name:e,color:t,bg_color:o}}})),r.layers.push({source:source,markers:_});case 11:case"end":return e.stop()}}),e)})))()}))},methods:{load:function(){var e=window.location.hash.substr(1),t=h.deserializeBounds(e);this.map=this.$refs.map_obj,(null!=t||null!=(t=h.deserializeBounds(this.map_config.default_hash)))&&this.map.map.fitBounds(t,{linear:!1}),this.map.map.on("moveend",this.etmitBounds),this.etmitBounds(),this.map.map.addControl(new d.a.NavigationControl)},etmitBounds:function(){this.bounds=this.map.map.getBounds(),this.setHash(this.bounds),this.$emit("bounds-changed")},setHash:function(e){var s=h.serializeBounds(e),path=location.pathname;s!=this.previous_hash&&window.history.pushState("","",path+"#"+s),this.previous_hash=s},selectCategory:function(e){this.activeCategory=e},clickPrintButton:function(){window.print()},getMarkerCategoryText:function(e,t){void 0===e&&(e="未分類");var o="category."+e,n=this.$i18n.t(o);return n!==o?n:e},getMarkerNameText:function(e,t){var o=e.name;return e.hasOwnProperty("name:"+t)&&(o=e["name:"+t]),o}}},C=o(24),k=Object(C.a)(v,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("client-only",[e.layers.length?o("div",[o("div",{staticClass:"map-outer"},[o("MglMap",{ref:"map_obj",attrs:{mapStyle:e.mapStyle,center:e.center,zoom:15,preserveDrawingBuffer:"",sourceId:"basemap",id:"map"},on:{"update:mapStyle":function(t){e.mapStyle=t},"update:map-style":function(t){e.mapStyle=t},load:e.load}},[o("MglGeolocateControl"),e._l(e.layers,(function(t,n){return e.checkedArea.includes(t.source.title)?e._l(t.markers,(function(marker,t){return o("MglMarker",{key:String(n)+String(t),attrs:{coordinates:marker.feature.geometry.coordinates}},[o("template",{slot:"marker"},[o("div",{staticClass:"marker"},[o("span",{class:{show:e.isDisplayAllCategory||e.activeCategory===marker.category},style:{background:e.map_config.layer_settings[marker.category].color}},[o("i",{class:[e.map_config.layer_settings[marker.category].icon_class,e.map_config.layer_settings[marker.category].class],style:{backgroundColor:e.map_config.layer_settings[marker.category].color}}),o("b",{staticClass:"number",style:{background:e.map_config.layer_settings[marker.category].bg_color}},[e._v(e._s(e.inBoundsMarkers.indexOf(marker)+1))])])])]),o("MglPopup",[o("div",[o("div",{staticClass:"popup-type"},[o("i",{class:[e.map_config.layer_settings[marker.category].icon_class,e.map_config.layer_settings[marker.category].class],style:{backgroundColor:e.map_config.layer_settings[marker.category].color}}),o("span",{staticClass:"popup-poi-type"},[e._v(e._s(e.getMarkerCategoryText(marker.category,e.$i18n.locale)))])]),o("p",[e._v(e._s(e.$i18n.t("PrintableMap.name"))+" "+e._s(e.getMarkerNameText(marker.feature.properties,e.$i18n.locale)))]),o("div",{staticClass:"popup-detail-content"},[o("p",{domProps:{innerHTML:e._s(marker.feature.properties.description?marker.feature.properties.description:"")}})])])])],2)})):e._e()}))],2)],1),o("div",{staticClass:"legend-navi"},[o("div",{staticClass:"area-select",class:{open:e.isOpenAreaSelect}},[o("div",{staticClass:"area-close",on:{click:function(t){e.isOpenAreaSelect=!1}}},[e._v(e._s(e.$t("PrintableMap.close_area_select"))),o("i",{staticClass:"fas fa-arrow-down"})]),o("div",{staticClass:"area-list-outer",class:{open:e.isOpenAreaSelect}},[o("ul",{staticClass:"area-list grid"},e._l(e.map_config.sources,(function(source){return o("li",{staticClass:"area-item col-12_xs-6"},[o("label",{staticClass:"area-label"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.selectArea,expression:"selectArea"}],staticClass:"area-input",attrs:{type:"checkbox"},domProps:{value:source.title,checked:Array.isArray(e.selectArea)?e._i(e.selectArea,source.title)>-1:e.selectArea},on:{change:function(t){var o=e.selectArea,n=t.target,r=!!n.checked;if(Array.isArray(o)){var l=source.title,c=e._i(o,l);n.checked?c<0&&(e.selectArea=o.concat([l])):c>-1&&(e.selectArea=o.slice(0,c).concat(o.slice(c+1)))}else e.selectArea=r}}}),e._v(e._s(source.title)),o("span",[e._v(e._s(source.updated_at))]),source.link?o("a",{attrs:{href:source.link,target:"blank"}},[e._v("["+e._s(e.$t("PrintableMap.back_to_map"))+"]")]):e._e()])])})),0)])]),o("div",{staticClass:"navigation"},[o("div",{staticClass:"navigation-area print-exclude"},[o("div",{staticClass:"legend-navi-icon active"},[o("div",{staticClass:"legend-navi-button print-button",on:{click:function(t){return e.clickPrintButton()}}},[o("span",{staticClass:"fa fa-print",attrs:{alt:e.$t("PrintableMap.print")}})])])]),o("div",{staticClass:"navigation-area"},[o("div",{staticClass:"area-select-button",on:{click:function(t){e.isOpenAreaSelect=!e.isOpenAreaSelect}}},[o("div",{staticClass:"area-array-outer"},[o("i",{staticClass:"fas fa-check-square"}),o("div",{staticClass:"area-array"},[e._v(e._s(e.checkedArea.join(", ")))])]),o("div",{staticClass:"area-select-button-icon print-exclude"},[o("i",{staticClass:"fas fa-arrow-up"})])])]),o("div",{staticClass:"navigation-legend legend-navi-inner print-exclude"},[o("div",{staticClass:"legend-navi-icon"},[o("img",{attrs:{src:e.legendMark,width:"60",height:"60",alt:e.$t("PrintableMap.legend")}})]),o("div",{staticClass:"legend-list-outer"},[o("simplebar",{attrs:{"data-simplebar-auto-hide":"false"}},[o("ul",{staticClass:"legend-list"},e._l(e.map_config.layer_settings,(function(t,n){return e.displayMarkersGroupByCategory.some((function(e){return e.category===n}))?o("li",{staticClass:"legend-item"},[o("span",{staticClass:"legend-mark",class:{open:e.isDisplayAllCategory||e.activeCategory===n},style:{backgroundColor:t.color},on:{click:function(t){e.selectCategory(n),e.isOpenList=n,e.isDisplayAllCategory=!1}}},[o("i",{class:[t.icon_class]})])]):e._e()})),0)])],1),o("div",{staticClass:"legend-navi-icon",class:{active:e.activeCategory},on:{click:function(t){e.selectCategory(""),e.isDisplayAllCategory=!0,e.isOpenList=!0}}},[o("div",{staticClass:"legend-navi-button"},[o("img",{staticClass:"legend-navi-img",attrs:{src:e.legendActive,width:"40",height:"40",alt:e.$t("PrintableMap.show_all")}})])])])]),o("div",{staticClass:"list-outer",class:{open:e.isOpenList}},[e._l(e.displayMarkersGroupByCategory,(function(t){return o("section",{staticClass:"list-section",class:{show:e.isDisplayAllCategory||e.activeCategory===e.getMarkerCategoryText(t.category,e.$i18n.locale)}},[o("h2",{staticClass:"list-title",style:{backgroundColor:e.map_config.layer_settings[t.category].color}},[o("span",{staticClass:"list-title-mark"},[o("i",{class:e.map_config.layer_settings[t.category].icon_class})]),o("span",[e._v(e._s(e.getMarkerCategoryText(t.category,e.$i18n.locale)))])]),o("ul",{staticClass:"list-items grid-noGutter"},e._l(t.markers,(function(marker){return o("li",{staticClass:"col-12_xs-6"},[o("span",{staticClass:"item-number"},[e._v(e._s(e.inBoundsMarkers.indexOf(marker)+1))]),o("span",{staticClass:"item-name"},[e._v(e._s(e.getMarkerNameText(marker.feature.properties,e.$i18n.locale)))])])})),0)])})),e.isDisplayAllCategory&&0===e.displayMarkersGroupByCategory.length?o("div",{staticClass:"list-section-none"},[o("p",[e._v(e._s(e.$t("PrintableMap.no_point_in_map")))])]):e._e()],2)]),o("div",{staticClass:"legend-close print-exclude",class:{open:e.isOpenList},on:{click:function(t){e.isOpenList=!1}}},[e._v(e._s(e.$t("PrintableMap.close_list"))),o("i",{staticClass:"fas fa-arrow-down"})])]):e._e()])],1)}),[],!1,null,null,null).exports,w=o(300);o(321).init();var x={components:{PrintableMap:k,VueQrcode:l.a,Modal:w.a},asyncData:function(e){var t=e.app.i18n.locale;return{updated_at:f(new Date,t)}},data:function(){return{map_config:o(294)("./"+this.$nuxt.$route.params.map),locale:null,isOpenExplain:!1,fullURL:null,updated_at:null}},head:function(){var title,e,image=this.map_config.map_image?this.map_config.map_image:"logo.png";switch(this.$i18n.locale){case"ja":title=this.map_config.map_title,e=this.map_config.map_description;break;case"en":default:title=this.map_config.map_title_en,e=this.map_config.map_description_en}return{title:title+" - "+this.$i18n.t("common.site_name"),meta:[{hid:"description",name:"description",content:e},{hid:"og:image",property:"og:image",content:"https://kamimap.com/images/"+image},{hid:"og:description",name:"og:description",content:e},{hid:"og:title",name:"og:title",content:title+this.$i18n.t("common.site_name")}]}},mounted:function(){this.fullURL=location.href},methods:{updateQRCode:function(){this.fullURL=location.href},closeModalMethod:function(){this.isOpenExplain=!1}}},A=Object(C.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout-map"},[n("div",{staticClass:"layout-map-inner grid-noGutter"},[n("aside",{staticClass:"print-exclude col-12_md-3_xl-6"},[n("div",{staticClass:"aside-inner"},[n("div",{staticClass:"aside-grid"},[n("div",{staticClass:"aside-item1"},[n("h2",{staticClass:"aside-title-sp"},[n("img",{attrs:{src:o(301),width:"607",height:"452",alt:e.$t("common.title")}})]),n("h2",{staticClass:"aside-title-pc"},[n("img",{attrs:{src:o(293),width:"895",height:"160",alt:e.$t("common.title")}})])]),n("div",{staticClass:"aside-item2"},[n("p",[e._v(e._s(e.$t("map.desc_1")))])]),e._m(0),n("div",{staticClass:"aside-item4"},[n("p",[e._v(e._s(e.$t("map.desc_2"))),n("br"),e._v(e._s(e.$t("map.desc_3")))])]),n("div",{staticClass:"aside-item5"},[n("p",[e._v(e._s(e.$t("map.desc_4"))),n("br"),e._v(e._s(e.$t("map.desc_5")))])]),e._m(1),n("div",{staticClass:"aside-item7"},[n("p",[e._v(e._s(e.$t("map.desc_6"))),n("br"),e._v(e._s(e.$t("map.desc_7")))])])])])]),n("main",{staticClass:"main col-12_md-9_xl-6"},[n("div",{staticClass:"main-sheet"},[n("header",{staticClass:"header"},[n("div",{staticClass:"to-top"},[n("nuxt-link",{attrs:{to:"/"}},[n("i",{staticClass:"far fa-arrow-alt-circle-left fa-2x"})])],1),n("div",{staticClass:"banner"},[n("div",{staticClass:"logo print-exclude"},[n("img",{attrs:{src:o(293),width:"895",height:"160",alt:e.$t("common.title")}})]),n("div",{staticClass:"sub-outer print-exclude"},[n("div",{staticClass:"sub-button",on:{click:function(t){e.isOpenExplain=!e.isOpenExplain}}},[n("i",{staticClass:"fas fa-info-circle fa-lg"}),n("span",[e._v(e._s(e.$t("common.about")))])]),n("div",{staticClass:"sub-button github-link"},[n("i",{staticClass:"fab fa-github fa-lg"}),n("a",{attrs:{href:"https://github.com/codeforjapan/mapprint"}},[e._v(e._s(e.$t("common.contribute")))])]),n("div",{staticClass:"sub-button"},[n("i",{staticClass:"fas fa-language fa-lg"}),n("select",{attrs:{onChange:"location.href=value;"}},[n("option",{staticClass:"language",attrs:{disabled:"",selected:""}},[e._v("Language: "+e._s(e.$i18n.locales.filter((function(i){return i.code===e.$i18n.locale}))[0].name))]),e._l(e.$i18n.locales,(function(t){return n("option",{domProps:{value:e.switchLocalePath(t.code)}},[e._v(e._s(t.name))])}))],2)])]),n("div",{staticClass:"title-outer"},[e.map_config&&"ja"===e.$i18n.locale?n("h1",{staticClass:"title"},[e._v(e._s(e.map_config.map_title))]):n("h1",{staticClass:"title"},[e._v(e._s(e.map_config.map_title_en))]),n("div",{staticClass:"datetime"},[e._v(e._s(e.$t("map.printed_at"))+" "+e._s(e.updated_at))])])]),n("div",{staticClass:"qrcode"},[n("vue-qrcode",{attrs:{value:e.fullURL,tag:"img"}})],1)]),e.map_config?n("printable-map",{attrs:{map_config:e.map_config},on:{"bounds-changed":e.updateQRCode}}):e._e(),n("footer",{staticClass:"footer"},[n("div",{staticClass:"footer-logo"},[n("img",{attrs:{src:o(293),width:"895",height:"160",alt:e.$t("common.title")}})])])],1)])]),n("modal",{attrs:{isOpen:e.isOpenExplain},on:{closeModal:e.closeModalMethod}})],1)}),n,!1,null,null,null);t.default=A.exports}}]);